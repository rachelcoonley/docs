<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Secrets in Rancher</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Documentation for Rancher">
    <link href="/docs/favicon.png" rel="shortcut icon" type="image/png" sizes="16x16">
    <link href="/docs/css/syntax.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/vendor/font-awesome/css/font-awesome.min.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/vendor/lato/lato.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/lacsso.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/slicknav.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/rancher-docs.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
  </head>
  <body class="bg-default">
    <div class="row body">
      <header id="header" class="section">
        <nav class="row" role="navigation">
          <div class="col span-3">
          <a class="navbar-brand" href="/"><img src="/docs/img/rancher-logo-nopadding.svg" width="200px" style="padding-left: 20px" /></a>
          </div>

          <div class="col span-5 offset-3">
            <!--Start Google Search-->
            <div class="gcse-search" id="google-search"></div>
            <script>
              var match = window.location.pathname.match(/\/rancher\/([^\/]+)/);
              if ( match ) {
                document.getElementById('google-search').setAttribute('data-defaultToRefinement', match[1]);
              }

              (function() {
                var cx = '007896692384436596364:60akf3bfmxm';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
            <!--End Google Search-->
          </div>
        </nav>
      </header>
      <div class="col span-3 mt-0 mr-0 sidebar">

<ul id="menu">
    <li><a href="/docs/rancher/v1.6/en/">Overview</a></li>
    <li><a href="/docs/rancher/v1.6/en/quick-start-guide/">Quick Start Guide</a></li>
    <li>
        <a href="#">Installing Rancher<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/">Rancher Server</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#requirements">Rancher Server Requirements</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#rancher-server-tags">Rancher Server Tags</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container">Launching Rancher Server</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#multi-nodes">Setting up HA</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#requirements-for-ha">HA Requirements</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container-external-database">Using an External DB</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container-bind-mount">Bind Mounted MySQL Volume</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#elb">Using an ELB in AWS</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#ldap">Using LDAP/AD with TLS</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#http-proxy">Behind an HTTP Proxy</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/selinux/">SELinux Requirements for RHEL/CentOS</a></li>
          <li>
               <a href="#">Basic SSL Configuration<i class="pull-right fa fa-angle-down"></i></a>
               <ul>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#requirements">Requirements</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-nginx-configuration">Example NGINX Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-apache-configuration">Example Apache Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-haproxy-configuration">Example HAProxy Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-f5-big-ip-configuration">Example F5 BIG-IP Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#elb">Using an ELB in AWS with SSL</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#using-self-signed-certs-beta">Using Self Signed Certs</a></li>
               </ul>
          </li>
          <li>
               <a href="#">No Internet Access<i class="pull-right fa fa-angle-down"></i></a>
               <ul>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/no-internet-access/#using-a-private-registry">Using a Private Registry</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/no-internet-access/#using-an-http-proxy">Using an HTTP Proxy</a></li>
               </ul>
          </li>
        </ul>
    </li>
    <li>
         <a href="#">Upgrading Rancher<i class="pull-right fa fa-angle-down"></i></a>
         <ul>
           <li><a href="/docs/rancher/v1.6/en/upgrading/">Upgrading Rancher</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#rancher-server-tags">Rancher Server Tags</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#infrastructure-services">Upgrading Infrastructure Services</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#multi-nodes">Upgrading Rancher HA Setup</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#single-container-external-database">Using an external DB</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#single-container-bind-mount">Bind Mounted MySQL Volume</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#rancher-server-with-no-internet-access">No Internet Access</a></li>
        </ul>
     </li>
    <li>
         <a href="#">Rancher Configuration<i class="pull-right fa fa-angle-down"></i></a>
         <ul>
           <li>
                <a href="#">Access Control Providers<i class="pull-right fa fa-angle-down"></i></a>
                <ul>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#active-directory">Active Directory</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#azure-ad">Azure AD</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#github">Github</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#local-authentication">Local Authentication</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#openldap">OpenLDAP</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#shibboleth">Shibboleth/SAML</a></li>
                </ul>
          </li>
          <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#site-access">Rancher Site Access</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#restricting-concurrent-sessions">Restricting Concurrent Sessions</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/accounts/">Accounts</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/settings/#host-registration">Host Registration</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/settings/#catalog">Enabling Catalogs</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/machine-drivers/">Machine Drivers</a></li>
        </ul>
    </li>
    <li>
          <a href="#">Environments<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
            <li><a href="/docs/rancher/v1.6/en/environments/">Managing Environments</a></li>
            <li><a href="/docs/rancher/v1.6/en/environments/#what-is-an-environment-template">Environment Templates</a></li>
            <li><a href="/docs/rancher/v1.6/en/environments/#membership-roles">Roles in an Environment</a></li>
          </ul>
    </li>
    <li>
        <a href="#">Hosts<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
          <li><a href="/docs/rancher/v1.6/en/hosts/">Getting Started with Hosts</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#supported-docker-versions">Supported Docker Versions</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#host-labels">Adding Host Labels</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#scheduler-ips">Adding Scheduler IPs</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#hosts-behind-an-http-proxy">Behind an HTTP Proxy</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/custom/">Adding Custom Hosts</a></li>
          <li>
              <a href="#">Adding Cloud Provided Hosts<i class="pull-right fa fa-angle-down"></i></a>
              <ul>
                <li><a href="/docs/rancher/v1.6/en/hosts/amazon/">Adding Amazon EC2 Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/azure/">Adding Azure Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/digitalocean/">Adding DigitalOcean Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/exoscale/">Adding Exoscale Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/packet/">Adding Packet Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/rackspace/">Adding Rackspace Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/other/">Adding Hosts from Other Cloud Providers</a></li>
              </ul>
          </li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#accessing-hosts-from-the-cloud-providers">Accessing Cloud Provided Hosts</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#removing-hosts">Removing Hosts</a></li>
        </ul>
    </li>
    <li>
      <a href="#">Registries<i class="pull-right fa fa-angle-down"></i></a>
      <ul>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/">Adding Private Registries</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#insecure-registries">Insecure Registries</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#self-signed-certificates">Self Signed Certificates</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#using-amazons-ecr-registry">Using Amazon's ECR</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#using-google-container-registry">Using Google Container Registry</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#changing-the-default-registry">Changing the Default Registry</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#limiting-which-registries-can-be-used">Limiting Registries</a></li>
      </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/environments/certificates/">Certificates</a></li>
    <li>
      <a href="#">Infrastructure Services<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/">Infrastructure Services</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/networking/">Networking</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/network-policy/">Network Policies</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/load-balancer">Load Balancer</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/dns-service/">DNS Service</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/metadata-service/">Metadata Service</a></li>
              <li>
                  <a href="#">Persistent Storage Service<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/">Persistent Storage Service</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/rancher-nfs/">Rancher NFS</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/rancher-ebs/">Rancher EBS</a></li>
                  </ul>
              </li>
              <li>
                  <a href="#">External Scheduler<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/">External Scheduler</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#multiple-ips">Scheduling against multiple IPs</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#resource-constraints">Scheduling with Resource Constraints</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#restrict-services-on-host">Scheduling only Specific Services on a Host</a></li>
                  </ul>
              </li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/audit-log/">Audit Logging</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/service-accounts/">Service Accounts</a></li>
           </ul>
    </li>
    <li>
          <a href="#">Cattle<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
                <li><a href="/docs/rancher/v1.6/en/cattle/stacks/">Stacks</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-services/">Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/volumes/">Volumes</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/">Load Balancers</a></li>
                <li>
                    <a href="#">Load Balancer Options in the UI<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#adding-a-load-balancer-in-the-ui">Adding Load Balancers</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#service-rule">Targeting Specific Services</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#selector-rule">Targeting Services based on Selectors</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#ssl-termination">SSL Termination</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#stickiness-policy-for-load-balancers">Stickiness Policy</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#custom-haproxy-configuration">Custom HAProxy Configuration</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#labelsscheduling-load-balancers">Labels and Scheduling</a></li>
                      </ul>
                </li>
                <li>
                    <a href="#">Load Balancer Options with CLI and Compose<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#adding-a-load-balancer-with-rancher-compose">Adding Load Balancers</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#source-ports">Defining Source Ports</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#port-rules">Port Rules</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#certificates">Certificates</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#custom-configuration">Custom HAProxy Configuration</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#stickiness-policy">Stickiness Policy</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#load-balancer-example-l7">Example of L7 Load Balancer</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#internal-load-balancer-example">Example of Internal Load Balancer</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#ssl-termination-example">Example of SSL Termination with a Load Balancer</a></li>
                      </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-external-services/">External Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-service-alias/">Service Alias</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/health-checks/">Health Checks</a></li>
                <li>
                    <a href="#">Scheduling Services<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/">Scheduling</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#scheduling-options-in-the-ui">Scheduling in the UI</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#adding-labels-in-rancher-compose">Scheduling in Rancher Compose</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#table-of-scheduling-labels">Table of Scheduling Labels</a></li>
                    </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/upgrading/">Upgrading Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/internal-dns-service/">Internal DNS Service in Cattle Environments</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/external-dns-service/">External DNS Service</a></li>
                <li>
                    <a href="#">Rancher-Compose<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/">Rancher Compose</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/commands/">Commands and Options</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/environment-interpolation/">Environment Interpolation</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/build/">Building with AWS S3</a></li>
                    </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/secrets/">Secrets - Experimental</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/webhook-service/">Webhooks</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/labels/">Labels in Cattle</a></li>
          </ul>
    </li>
    <li>
          <a href="#">Kubernetes<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/">Launching Kubernetes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/resiliency-planes/">Resiliency Planes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/providers/">Cloud Providers</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/private-registry/">Private Registry</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/rbac/">RBAC</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/disaster-recovery/">Disaster Recovery</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/backups/">Backups</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/storage/">Persistent Storage</a></li>
              <li>
                  <a href="#">Add-ons Support<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/">Add-ons Support</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/#helm">Helm</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/#skydns">SkyDNS</a></li>
                  </ul>
              </li>
              <li>
                  <a href="#">Ingress Support and Options<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/">Ingress Support</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#host-based-routing">Host Based Routing</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#path-based-routing">Path Based Routing</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#scale-and-other-port">Multiple Load Balancers and Selecting Ports</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#tls">Using TLS</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#blocking-http">Blocking HTTP</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#custom-haproxy">Custom HAProxy</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#scheduled-globally">Scheduling on all Hosts</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#host-scheduling">Scheduling on a specific Host</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#only-local">Targeting Only Containers on the Same Host</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#prefer-local">Prioritizing Containers on the Same Host</a></li>
                  </ul>
              </li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/upgrading/">Upgrading Kubernetes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/deleting/">Deleting Kubernetes</a></li>

          </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/mesos/">Mesos</a></li>
    <li><a href="/docs/rancher/v1.6/en/swarm/">Swarm - Experimental </a></li>
    <li><a href="/docs/rancher/v1.6/en/windows/">Windows - Experimental</a></li>
    <li><a href="/docs/rancher/v1.6/en/native-docker/">Using Native Docker CLI</a></li>
    <li>
            <a href="#">Rancher Catalog<i class="pull-right fa fa-angle-down"></i></a>
            <ul>
                <li><a href="/docs/rancher/v1.6/en/catalog/">Catalog</a></li>
                <li><a href="/docs/rancher/v1.6/en/catalog/private-catalog/">Creating Private Catalogs</a></li>
            </ul>
        </li>
    <li><a href="#">Rancher CLI<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.6/en/cli/">Rancher CLI</a></li>
            <li><a href="/docs/rancher/v1.6/en/cli/commands/">Commands and Options</a></li>
            <li><a href="/docs/rancher/v1.6/en/cli/variable-interpolation/">Variable Interpolation</a></li>
        </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/api/v2-beta/">API Documentation</a></li>
    <li><a href="/docs/rancher/v1.6/en/contributing/">Contributing to Rancher</a></li>
    <li>
        <a href="#">FAQs<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.6/en/faqs/server/">FAQs about Rancher Server</a></li>
            <li><a href="/docs/rancher/v1.6/en/faqs/agents/">FAQs about Rancher Agents/Hosts</a></li>
            <li><a href="/docs/rancher/v1.6/en/faqs/troubleshooting/">Troubleshooting FAQS</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Docs Archive<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.5/en/">Rancher v1.5</a></li>
            <li><a href="/docs/rancher/v1.4/en/">Rancher v1.4</a></li>
            <li><a href="/docs/rancher/v1.3/en/">Rancher v1.3</a></li>
            <li><a href="/docs/rancher/v1.2/en/">Rancher v1.2</a></li>
            <li><a href="/docs/rancher/v1.1/en/">Rancher v1.1</a></li>
            <li><a href="/docs/rancher/v1.0/en/">Rancher v1.0</a></li>
        </ul>
    </li>
</ul>

      </div>

      <div class="col span-8">
        <div class="content-container">
          <h2 id="secrets---experimental">Secrets - Experimental</h2>
<hr />

<p>Rancher has introduced the ability to create named secrets to be used in containers. Rancher interfaces with an encryption backend, by using either a local AES (Advanced Encryption Standard) key or <a href="https://www.vaultproject.io/docs/secrets/transit/">Vault Transit</a>, to securely store the values within Rancher.</p>

<h3 id="encryption-backend-configuration">Encryption Backend Configuration</h3>

<p>By default, Rancher server is configured to use a locally stored AES256 encryption key to perform the encryption of secrets. These encrypted values are stored in the MySQL database that Rancher server uses.</p>

<h4 id="using-vault-transit">Using Vault Transit</h4>

<p>Instead of using the locally stored key, Rancher can be configured to use <a href="https://www.vaultproject.io/docs/secrets/transit/">Vault Transit</a> to perform the encryption.</p>

<h5 id="installing-rancher-server-using-vault-transit">Installing Rancher Server using Vault Transit</h5>

<p>Prior to installing Rancher Server, there are a couple of pre-requisites that need to be completed with Vault Transit.</p>

<ol>
  <li>Mount the Vault transit backend on the host that will be running Rancher server</li>
  <li>Using the Vault CLI or API, create a new encryption key named <code class="highlighter-rouge">rancher</code></li>
  <li>Using the Vault CLI or API, create a Vault access token that can encrypt/decrypt using the <code class="highlighter-rouge">rancher</code> key
    <ul>
      <li>
        <p>This token must be scoped with a policy for Rancher server to use the following Vault Transit endpoints. The <code class="highlighter-rouge">&lt;KEY&gt;</code> in this list is the <code class="highlighter-rouge">rancher</code> key that was created.</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>path "transit/random/*" {
  capabilities = ["create", "update"]
}

path "transit/hmac/*" {
  capabilities = ["create", "update"]
}

path "transit/encrypt/rancher" {
  capabilities = ["create", "update"]
}

path "transit/decrypt/rancher" {
  capabilities = ["create", "update"]
}

path "transit/verify/rancher/*" {
  capabilities = ["create", "update", "read"]
}

path "transit/keys/*" {
  capabilities = ["deny"]
}

path "sys/*" {
  capabilities = ["deny"]
}
</code></pre>
        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Launch Rancher server and add environment variables to the command to connect to Vault.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>docker run -d --restart<span class="o">=</span>unless-stopped -p 8080:8080 <span class="se">\</span>
   -e <span class="nv">VAULT_ADDR</span><span class="o">=</span>https://&lt;VAULT_SERVER&gt; -e <span class="nv">VAULT_TOKEN</span><span class="o">=</span>&lt;TOKEN_FOR_VAULT_ACCCESS&gt; rancher/server
</code></pre>
    </div>

    <blockquote>
      <p><strong>Note:</strong> Verify that you are running the desired <a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#rancher-server-tags">Rancher server tag</a>.</p>
    </blockquote>
  </li>
  <li>Once Rancher server is up, you will need to update the <code class="highlighter-rouge">service-backend</code> setting within Rancher. Under <strong>Admin</strong> -&gt; <strong>Settings</strong> -&gt; <strong>Advanced Settings</strong>, find the <code class="highlighter-rouge">secrets.backend</code> value. By default, it will have <code class="highlighter-rouge">localkey</code> as the value. You can edit it to the value of <code class="highlighter-rouge">vault</code>.</li>
</ol>

<blockquote>
  <p><strong>Note:</strong> Currently, Rancher does not support switching between encryption backend types.</p>
</blockquote>

<h3 id="creating-secrets">Creating Secrets</h3>

<p>Secrets are created and scoped at an environment level, which means there can only be one secret with the same name in an environment. Any container in the same environment can share the same secrets. For example, a database password, i.e. <code class="highlighter-rouge">db_password</code>, can be used in a database container and a Wordpress container. Once a secret is created, the secret value <strong>cannot</strong> be edited or updated. If you need to change an existing value of a secret, the only way to do so is to delete the secret. After a secret has been updated, any services using the secret will need to be re-launched with the updated secret.</p>

<h4 id="creating-secrets-using-rancher-cli">Creating secrets using Rancher CLI</h4>

<p>There are two ways to create secrets from the cli. One is by providing the secret value through standard input (stdin), and one by passing the filename containing the secret to be added.</p>

<h5 id="example-of-adding-a-secret-through-standard-input-stdin">Example of adding a secret through standard input (stdin)</h5>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rancher secrets create name-of-secret - <span class="o">&lt;&lt;&lt;</span> secret-value
</code></pre>
</div>

<h5 id="example-of-adding-a-secret-by-passing-the-filename-containing-the-secret">Example of adding a secret by passing the filename containing the secret</h5>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">echo </span>secret-value &gt; file-with-secret
<span class="gp">$ </span>rancher secrets create name-of-secret file-with-secret
</code></pre>
</div>

<h4 id="creating-secrets-in-the-ui">Creating secrets in the UI</h4>

<p>Go to <strong>Infrastructure</strong> -&gt; <strong>Secrets</strong>. Provide a <strong>Name</strong> and a <strong>Secret Value</strong> and <strong>Save</strong> the secret.</p>

<h3 id="deleting-secrets">Deleting Secrets</h3>

<blockquote>
  <p><strong>Note:</strong> Rancher CLI currently does not support deleting secrets.</p>
</blockquote>

<p>In the UI, secrets can be deleted from Rancher, but it does not remove the secret (i.e. file) from any container using the secret or on the host that are running containers using a secret.</p>

<h3 id="enabling-secrets-in-containers">Enabling Secrets in Containers</h3>

<p>In order to consume secrets in containers, the <strong>Rancher Secrets</strong> service will need to be launched. This service can be deployed by either adding it to <a href="/docs/rancher/v1.6/en/environments/#what-is-an-environment-template">environment templates</a> so that it’s deployed on all <a href="/docs/rancher/v1.6/en/environments/">environments</a> or by launching it directly from the <a href="/docs/rancher/v1.6/en/catalog/">Rancher Catalog</a>. If you are adding this service to an existing environment, navigate to <strong>Catalog</strong> -&gt; <strong>Library</strong> and search for the <strong>Rancher Secrets</strong> entry. Without launching this catalog entry, you will only be able create secrets, but not be able to use them in your containers.</p>

<h3 id="adding-secrets-to-servicescontainers">Adding Secrets to Services/Containers</h3>

<p>When secrets are added to a container, the secrets are written to a tmpfs volume, which can be accessible from the container and the host.</p>

<ul>
  <li>Inside the container: The volume is mounted at <code class="highlighter-rouge">/run/secrets/</code>.</li>
  <li>On the host that is running the container using the secrets: The volume is mounted at <code class="highlighter-rouge">/var/lib/rancher/volumes/rancher-secrets/</code>.</li>
</ul>

<h4 id="adding-secrets-using-rancher-cli">Adding secrets using Rancher CLI</h4>

<blockquote>
  <p><strong>Note:</strong> Secrets were introduced in compose file version 3. As Rancher does not support compose version 3, we enabled the use of secrets in version 2.</p>
</blockquote>

<p>For default usage of secrets, you can reference the secret by name in the secrets array in the <code class="highlighter-rouge">docker-compose.yml</code>. The target filename will be the same name as the name of the secret. By default, the target filename will be created as User ID and Group ID <code class="highlighter-rouge">0</code>, and File Mode of <code class="highlighter-rouge">0444</code>. Setting <code class="highlighter-rouge">external</code> to <code class="highlighter-rouge">true</code> in the <code class="highlighter-rouge">secrets</code> part will make sure it knows the secret has already been created.</p>

<h5 id="example-basic-docker-composeyml">Example basic <code class="highlighter-rouge">docker-compose.yml</code></h5>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="s">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
<span class="s">services</span><span class="pi">:</span>
  <span class="s">web</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">sdelements/lets-chat</span>
    <span class="s">stdin_open</span><span class="pi">:</span> <span class="s">true</span>
    <span class="s">secrets</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name-of-secret</span>
    <span class="s">labels</span><span class="pi">:</span>
      <span class="s">io.rancher.container.pull_image</span><span class="pi">:</span> <span class="s">always</span>
<span class="s">secrets</span><span class="pi">:</span>
  <span class="s">name-of-secret</span><span class="pi">:</span>
    <span class="s">external</span><span class="pi">:</span> <span class="s">true</span>
</code></pre>
</div>

<p>If you want to change the default values of secrets, you can use <code class="highlighter-rouge">target</code> for the target filename, <code class="highlighter-rouge">uid</code> and <code class="highlighter-rouge">gid</code> for setting User ID and Group ID, and <code class="highlighter-rouge">mode</code> for setting File Mode.</p>

<h5 id="example-changing-parameters-docker-composeyml">Example changing parameters <code class="highlighter-rouge">docker-compose.yml</code></h5>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="s">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
<span class="s">services</span><span class="pi">:</span>
  <span class="s">web</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">sdelements/lets-chat</span>
    <span class="s">stdin_open</span><span class="pi">:</span> <span class="s">true</span>
    <span class="s">secrets</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">source</span><span class="pi">:</span> <span class="s">name-of-secret</span>
      <span class="s">target</span><span class="pi">:</span> <span class="s">different-target-filename</span>
      <span class="s">uid</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span>
      <span class="s">gid</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span>
      <span class="s">mode</span><span class="pi">:</span> <span class="s">0400</span>
    <span class="s">labels</span><span class="pi">:</span>
      <span class="s">io.rancher.container.pull_image</span><span class="pi">:</span> <span class="s">always</span>
<span class="s">secrets</span><span class="pi">:</span>
  <span class="s">name-of-secret</span><span class="pi">:</span>
    <span class="s">external</span><span class="pi">:</span> <span class="s">true</span>
</code></pre>
</div>

<p>You can also specify multiple secrets, and create the secret while starting the stack. To do this you specify the <code class="highlighter-rouge">file</code> parameter, the contents of the the specified file will be used to create the secret before creating the stack and starting the service(s).</p>

<h5 id="example-multiple-secrets-docker-composeyml">Example multiple secrets <code class="highlighter-rouge">docker-compose.yml</code></h5>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="s">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
<span class="s">services</span><span class="pi">:</span>
  <span class="s">web</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">sdelements/lets-chat</span>
    <span class="s">stdin_open</span><span class="pi">:</span> <span class="s">true</span>
    <span class="s">secrets</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name-of-secret</span>
    <span class="pi">-</span> <span class="s">another-name-of-secret</span>
    <span class="s">labels</span><span class="pi">:</span>
      <span class="s">io.rancher.container.pull_image</span><span class="pi">:</span> <span class="s">always</span>
<span class="s">secrets</span><span class="pi">:</span>
  <span class="s">name-of-secret</span><span class="pi">:</span>
    <span class="s">external</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">another-name-of-secret</span><span class="pi">:</span>
    <span class="s">file</span><span class="pi">:</span> <span class="s">./another-secret</span>
</code></pre>
</div>

<h4 id="adding-secrets-in-the-ui">Adding secrets in the UI</h4>

<p>Secrets can be added into a service/container under the <strong>Secrets</strong> tab during service/container creation.</p>

<ol>
  <li>Select <strong>Add Secret</strong></li>
  <li>The list of available secrets that have been created in Rancher is available in a drop down. Select the secret that you’d like to use.</li>
  <li>(Optional) Input a different filename for the secrets file. By default, it will use the name of the secret for the filename.</li>
  <li>(Optional) If the default file mode needs to be modified, click the <strong>Customize file ownership &amp; permissions</strong> link. The User ID, Group ID and File Mode (octal) can be updated. By default, the User ID is <code class="highlighter-rouge">0</code>, the Group ID is <code class="highlighter-rouge">0</code> and the file mode is <code class="highlighter-rouge">0444</code>.</li>
  <li>Click <strong>Create</strong>.</li>
</ol>

<h3 id="docker-hub-images">Docker Hub Images</h3>

<p>Docker has provided support in many of their official repositories to enable passing secrets through files. To take advantage of this, append <code class="highlighter-rouge">_FILE</code> to the environment variable name and the value would be <code class="highlighter-rouge">/run/secrets/NAME&gt;</code>. When the container starts up, the value in the file will be assigned to the environment variable.</p>

<p>For example, when launching a MySQL container you can set environment variables to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>-e MYSQL_ROOT_PASSWORD_FILE=/run/secrets/db_password
</code></pre>
</div>

<p>The <code class="highlighter-rouge">MYSQL_ROOT_PASSWORD</code> environment variable will use the value from the file.</p>

<h3 id="known-vulnerabilities">Known Vulnerabilities</h3>

<h4 id="compromised-rancher-server-container">Compromised Rancher server container</h4>

<p>Secrets stored in Rancher contain the same level of trust as CI systems such as Travis CI and Drone. Since the encryption keys are stored directly in the Rancher server container, any compromise of the Rancher server should be treated as a compromise of your secret data. Rancher will be working to mitigate this condition in a future release.</p>

<blockquote>
  <p><strong>Note:</strong> If you are using Vault for your encryption, create a policy that limits the access of the token used by Rancher server.</p>
</blockquote>

<h4 id="compromised-host">Compromised Host</h4>

<p>If a host is compromised, secrets of all containers on the host can be accessed. The attacker can not list or request additional secrets to be placed on a host.</p>

<h4 id="container-access">Container Access</h4>
<p>If a user has access to be able to execute into a container, the secrets of the container can be accessed through the volume stored in the container. Containers can be accessed through the following methods:</p>

<ul>
  <li>UI Access through “Exec Shell”</li>
  <li>Rancher CLI</li>
  <li>Docker</li>
</ul>


          <footer class="clearfix">
            <div class="copyright pull-left">Copyright &copy; 2014-2017 <a href="http://rancher.com">Rancher Labs</a>.  All Rights Reserved.</div>
            <a class="btn btn-primary pull-right" href="https://github.com/rancher/rancher.github.io/tree/master/rancher/v2.0/en/cattle/secrets/index.md">Edit this page <i class="fa fa-pencil"></i></a>
          </footer>
        </div>
      </div>
    </div>

    <script src="/docs/vendor/jquery.js?t=2017-09-13 18:12:52 -0700"></script>
    <script src="/docs/js/jquery.slicknav.min.js?t=2017-09-13 18:12:52 -0700"></script>
    <script src="/docs/js/rancher-docs.js?t=2017-09-13 18:12:52 -0700"></script>

    <!-- Start of Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-56382716-3', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End of Google Analytics -->

    <!-- Start of Async HubSpot Analytics Code -->
    <script type="text/javascript">
    (function(d,s,i,r) {
    if (d.getElementById(i)){return;}
    var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
    n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/468859.js';
    e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
    </script>
    <!-- End of Async HubSpot Analytics Code -->
  </body>
</html>

