<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Metadata Service in Rancher</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Documentation for Rancher">
    <link href="/docs/favicon.png" rel="shortcut icon" type="image/png" sizes="16x16">
    <link href="/docs/css/syntax.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/vendor/font-awesome/css/font-awesome.min.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/vendor/lato/lato.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/lacsso.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/slicknav.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/rancher-docs.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
  </head>
  <body class="bg-default">
    <div class="row body">
      <header id="header" class="section">
        <nav class="row" role="navigation">
          <div class="col span-3">
          <a class="navbar-brand" href="/"><img src="/docs/img/rancher-logo-nopadding.svg" width="200px" style="padding-left: 20px" /></a>
          </div>

          <div class="col span-5 offset-3">
            <!--Start Google Search-->
            <div class="gcse-search" id="google-search"></div>
            <script>
              var match = window.location.pathname.match(/\/rancher\/([^\/]+)/);
              if ( match ) {
                document.getElementById('google-search').setAttribute('data-defaultToRefinement', match[1]);
              }

              (function() {
                var cx = '007896692384436596364:60akf3bfmxm';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
            <!--End Google Search-->
          </div>
        </nav>
      </header>
      <div class="col span-3 mt-0 mr-0 sidebar">

<ul id="menu">
    <li><a href="/docs/rancher/v1.6/en/">Overview</a></li>
    <li><a href="/docs/rancher/v1.6/en/quick-start-guide/">Quick Start Guide</a></li>
    <li>
        <a href="#">Installing Rancher<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/">Rancher Server</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#requirements">Rancher Server Requirements</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#rancher-server-tags">Rancher Server Tags</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container">Launching Rancher Server</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#multi-nodes">Setting up HA</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#requirements-for-ha">HA Requirements</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container-external-database">Using an External DB</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container-bind-mount">Bind Mounted MySQL Volume</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#elb">Using an ELB in AWS</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#ldap">Using LDAP/AD with TLS</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#http-proxy">Behind an HTTP Proxy</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/selinux/">SELinux Requirements for RHEL/CentOS</a></li>
          <li>
               <a href="#">Basic SSL Configuration<i class="pull-right fa fa-angle-down"></i></a>
               <ul>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#requirements">Requirements</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-nginx-configuration">Example NGINX Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-apache-configuration">Example Apache Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-haproxy-configuration">Example HAProxy Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-f5-big-ip-configuration">Example F5 BIG-IP Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#elb">Using an ELB in AWS with SSL</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#using-self-signed-certs-beta">Using Self Signed Certs</a></li>
               </ul>
          </li>
          <li>
               <a href="#">No Internet Access<i class="pull-right fa fa-angle-down"></i></a>
               <ul>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/no-internet-access/#using-a-private-registry">Using a Private Registry</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/no-internet-access/#using-an-http-proxy">Using an HTTP Proxy</a></li>
               </ul>
          </li>
        </ul>
    </li>
    <li>
         <a href="#">Upgrading Rancher<i class="pull-right fa fa-angle-down"></i></a>
         <ul>
           <li><a href="/docs/rancher/v1.6/en/upgrading/">Upgrading Rancher</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#rancher-server-tags">Rancher Server Tags</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#infrastructure-services">Upgrading Infrastructure Services</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#multi-nodes">Upgrading Rancher HA Setup</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#single-container-external-database">Using an external DB</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#single-container-bind-mount">Bind Mounted MySQL Volume</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#rancher-server-with-no-internet-access">No Internet Access</a></li>
        </ul>
     </li>
    <li>
         <a href="#">Rancher Configuration<i class="pull-right fa fa-angle-down"></i></a>
         <ul>
           <li>
                <a href="#">Access Control Providers<i class="pull-right fa fa-angle-down"></i></a>
                <ul>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#active-directory">Active Directory</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#azure-ad">Azure AD</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#github">Github</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#local-authentication">Local Authentication</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#openldap">OpenLDAP</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#shibboleth">Shibboleth/SAML</a></li>
                </ul>
          </li>
          <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#site-access">Rancher Site Access</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#restricting-concurrent-sessions">Restricting Concurrent Sessions</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/accounts/">Accounts</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/settings/#host-registration">Host Registration</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/settings/#catalog">Enabling Catalogs</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/machine-drivers/">Machine Drivers</a></li>
        </ul>
    </li>
    <li>
          <a href="#">Environments<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
            <li><a href="/docs/rancher/v1.6/en/environments/">Managing Environments</a></li>
            <li><a href="/docs/rancher/v1.6/en/environments/#what-is-an-environment-template">Environment Templates</a></li>
            <li><a href="/docs/rancher/v1.6/en/environments/#membership-roles">Roles in an Environment</a></li>
          </ul>
    </li>
    <li>
        <a href="#">Hosts<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
          <li><a href="/docs/rancher/v1.6/en/hosts/">Getting Started with Hosts</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#supported-docker-versions">Supported Docker Versions</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#host-labels">Adding Host Labels</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#scheduler-ips">Adding Scheduler IPs</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#hosts-behind-an-http-proxy">Behind an HTTP Proxy</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/custom/">Adding Custom Hosts</a></li>
          <li>
              <a href="#">Adding Cloud Provided Hosts<i class="pull-right fa fa-angle-down"></i></a>
              <ul>
                <li><a href="/docs/rancher/v1.6/en/hosts/amazon/">Adding Amazon EC2 Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/azure/">Adding Azure Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/digitalocean/">Adding DigitalOcean Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/exoscale/">Adding Exoscale Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/packet/">Adding Packet Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/rackspace/">Adding Rackspace Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/other/">Adding Hosts from Other Cloud Providers</a></li>
              </ul>
          </li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#accessing-hosts-from-the-cloud-providers">Accessing Cloud Provided Hosts</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#removing-hosts">Removing Hosts</a></li>
        </ul>
    </li>
    <li>
      <a href="#">Registries<i class="pull-right fa fa-angle-down"></i></a>
      <ul>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/">Adding Private Registries</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#insecure-registries">Insecure Registries</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#self-signed-certificates">Self Signed Certificates</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#using-amazons-ecr-registry">Using Amazon's ECR</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#using-google-container-registry">Using Google Container Registry</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#changing-the-default-registry">Changing the Default Registry</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#limiting-which-registries-can-be-used">Limiting Registries</a></li>
      </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/environments/certificates/">Certificates</a></li>
    <li>
      <a href="#">Infrastructure Services<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/">Infrastructure Services</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/networking/">Networking</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/network-policy/">Network Policies</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/load-balancer">Load Balancer</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/dns-service/">DNS Service</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/metadata-service/">Metadata Service</a></li>
              <li>
                  <a href="#">Persistent Storage Service<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/">Persistent Storage Service</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/rancher-nfs/">Rancher NFS</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/rancher-ebs/">Rancher EBS</a></li>
                  </ul>
              </li>
              <li>
                  <a href="#">External Scheduler<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/">External Scheduler</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#multiple-ips">Scheduling against multiple IPs</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#resource-constraints">Scheduling with Resource Constraints</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#restrict-services-on-host">Scheduling only Specific Services on a Host</a></li>
                  </ul>
              </li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/audit-log/">Audit Logging</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/service-accounts/">Service Accounts</a></li>
           </ul>
    </li>
    <li>
          <a href="#">Cattle<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
                <li><a href="/docs/rancher/v1.6/en/cattle/stacks/">Stacks</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-services/">Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/volumes/">Volumes</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/">Load Balancers</a></li>
                <li>
                    <a href="#">Load Balancer Options in the UI<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#adding-a-load-balancer-in-the-ui">Adding Load Balancers</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#service-rule">Targeting Specific Services</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#selector-rule">Targeting Services based on Selectors</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#ssl-termination">SSL Termination</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#stickiness-policy-for-load-balancers">Stickiness Policy</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#custom-haproxy-configuration">Custom HAProxy Configuration</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#labelsscheduling-load-balancers">Labels and Scheduling</a></li>
                      </ul>
                </li>
                <li>
                    <a href="#">Load Balancer Options with CLI and Compose<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#adding-a-load-balancer-with-rancher-compose">Adding Load Balancers</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#source-ports">Defining Source Ports</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#port-rules">Port Rules</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#certificates">Certificates</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#custom-configuration">Custom HAProxy Configuration</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#stickiness-policy">Stickiness Policy</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#load-balancer-example-l7">Example of L7 Load Balancer</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#internal-load-balancer-example">Example of Internal Load Balancer</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#ssl-termination-example">Example of SSL Termination with a Load Balancer</a></li>
                      </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-external-services/">External Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-service-alias/">Service Alias</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/health-checks/">Health Checks</a></li>
                <li>
                    <a href="#">Scheduling Services<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/">Scheduling</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#scheduling-options-in-the-ui">Scheduling in the UI</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#adding-labels-in-rancher-compose">Scheduling in Rancher Compose</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#table-of-scheduling-labels">Table of Scheduling Labels</a></li>
                    </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/upgrading/">Upgrading Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/internal-dns-service/">Internal DNS Service in Cattle Environments</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/external-dns-service/">External DNS Service</a></li>
                <li>
                    <a href="#">Rancher-Compose<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/">Rancher Compose</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/commands/">Commands and Options</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/environment-interpolation/">Environment Interpolation</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/build/">Building with AWS S3</a></li>
                    </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/secrets/">Secrets - Experimental</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/webhook-service/">Webhooks</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/labels/">Labels in Cattle</a></li>
          </ul>
    </li>
    <li>
          <a href="#">Kubernetes<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/">Launching Kubernetes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/resiliency-planes/">Resiliency Planes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/providers/">Cloud Providers</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/private-registry/">Private Registry</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/rbac/">RBAC</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/disaster-recovery/">Disaster Recovery</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/backups/">Backups</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/storage/">Persistent Storage</a></li>
              <li>
                  <a href="#">Add-ons Support<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/">Add-ons Support</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/#helm">Helm</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/#skydns">SkyDNS</a></li>
                  </ul>
              </li>
              <li>
                  <a href="#">Ingress Support and Options<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/">Ingress Support</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#host-based-routing">Host Based Routing</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#path-based-routing">Path Based Routing</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#scale-and-other-port">Multiple Load Balancers and Selecting Ports</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#tls">Using TLS</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#blocking-http">Blocking HTTP</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#custom-haproxy">Custom HAProxy</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#scheduled-globally">Scheduling on all Hosts</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#host-scheduling">Scheduling on a specific Host</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#only-local">Targeting Only Containers on the Same Host</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#prefer-local">Prioritizing Containers on the Same Host</a></li>
                  </ul>
              </li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/upgrading/">Upgrading Kubernetes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/deleting/">Deleting Kubernetes</a></li>

          </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/mesos/">Mesos</a></li>
    <li><a href="/docs/rancher/v1.6/en/swarm/">Swarm - Experimental </a></li>
    <li><a href="/docs/rancher/v1.6/en/windows/">Windows - Experimental</a></li>
    <li><a href="/docs/rancher/v1.6/en/native-docker/">Using Native Docker CLI</a></li>
    <li>
            <a href="#">Rancher Catalog<i class="pull-right fa fa-angle-down"></i></a>
            <ul>
                <li><a href="/docs/rancher/v1.6/en/catalog/">Catalog</a></li>
                <li><a href="/docs/rancher/v1.6/en/catalog/private-catalog/">Creating Private Catalogs</a></li>
            </ul>
        </li>
    <li><a href="#">Rancher CLI<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.6/en/cli/">Rancher CLI</a></li>
            <li><a href="/docs/rancher/v1.6/en/cli/commands/">Commands and Options</a></li>
            <li><a href="/docs/rancher/v1.6/en/cli/variable-interpolation/">Variable Interpolation</a></li>
        </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/api/v2-beta/">API Documentation</a></li>
    <li><a href="/docs/rancher/v1.6/en/contributing/">Contributing to Rancher</a></li>
    <li>
        <a href="#">FAQs<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.6/en/faqs/server/">FAQs about Rancher Server</a></li>
            <li><a href="/docs/rancher/v1.6/en/faqs/agents/">FAQs about Rancher Agents/Hosts</a></li>
            <li><a href="/docs/rancher/v1.6/en/faqs/troubleshooting/">Troubleshooting FAQS</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Docs Archive<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.5/en/">Rancher v1.5</a></li>
            <li><a href="/docs/rancher/v1.4/en/">Rancher v1.4</a></li>
            <li><a href="/docs/rancher/v1.3/en/">Rancher v1.3</a></li>
            <li><a href="/docs/rancher/v1.2/en/">Rancher v1.2</a></li>
            <li><a href="/docs/rancher/v1.1/en/">Rancher v1.1</a></li>
            <li><a href="/docs/rancher/v1.0/en/">Rancher v1.0</a></li>
        </ul>
    </li>
</ul>

      </div>

      <div class="col span-8">
        <div class="content-container">
          <h2 id="metadata-service">Metadata Service</h2>
<hr />

<p>Rancher offers data for both your services and containers through our metadata infrastructure service. This data can be used to manage your running Docker instances in the form of a metadata service accessed directly through a HTTP based API.  These data can include static information when creating your Docker containers, Rancher Services, or runtime data such as discovery information about peer containers within the same service.</p>

<p>With Rancher’s metadata service, you can exec into any container using the Rancher managed network and retrieve information about containers in Rancher. The metadata could be related to the container, the service or stack that the container is part of, or the host that the container is on. The metadata is in a JSON format.</p>

<p>Containers can be launched in the Rancher managed network in several ways. Read more about how <a href="/docs/rancher/v1.6/en/rancher-services/networking">networking</a> works in Rancher.</p>

<h3 id="how-to-get-the-metadata">How to Get the Metadata</h3>

<p>From the Rancher UI, you can execute into shell of the container by selecting <strong>Execute Shell</strong> from the drop down of the container. The drop down can be found by hovering over the container.</p>

<p>To obtain the metadata, you’ll run a curl command.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># If curl is not installed, install it</span>
<span class="gp">$ </span>apt-get install curl
<span class="c"># Basic curl command to obtain a plaintext response</span>
<span class="gp">$ </span>curl http://rancher-metadata/&lt;version&gt;/&lt;path&gt;
</code></pre>
</div>
<p>The path can be changed depending on what metadata you want to retrieve as well as the response format.</p>

<table>
  <thead>
    <tr>
      <th>Metadata</th>
      <th>path</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Container</td>
      <td><code class="highlighter-rouge">self/container</code></td>
      <td>Provides metadata on the container that you are executing the command in</td>
    </tr>
    <tr>
      <td>Service that container is part of</td>
      <td><code class="highlighter-rouge">self/service</code></td>
      <td>Provides metadata on the service of the container that you are executing the command in</td>
    </tr>
    <tr>
      <td>Stack that container is part of</td>
      <td><code class="highlighter-rouge">self/stack</code></td>
      <td>Provides metadata on the stack of the container that you are executing the command in</td>
    </tr>
    <tr>
      <td>Host that container is deployed on</td>
      <td><code class="highlighter-rouge">self/host</code></td>
      <td>Provides metadata on the host of the container that you are executing the command in</td>
    </tr>
    <tr>
      <td>Other Containers</td>
      <td><code class="highlighter-rouge">containers</code></td>
      <td>Provides metadata on all containers. In plaintext, it provides an indexed response of all containers. In JSON format, it provides all the metadata for all  containers. Using either the index number or name in the path, you can obtain metadata on a specific container.</td>
    </tr>
    <tr>
      <td>Other Services</td>
      <td><code class="highlighter-rouge">services</code></td>
      <td>Provides metadata on all services. In plaintext, it provides an indexed response of all services. In JSON format, it provides all the metadata for all services. Using either the index number or name in the path, you can obtain metadata on a specific service. If drilling down to containers, in V1 (<code class="highlighter-rouge">2015-07-25</code>), only container name(s) are returned, but in V2 (<code class="highlighter-rouge">2015-12-19</code>), container object(s) are returned.</td>
    </tr>
    <tr>
      <td>Other Stacks</td>
      <td><code class="highlighter-rouge">stacks/&lt;stack-name&gt;</code></td>
      <td>Provides metadata on all stacks. In plaintext, it provides an indexed response of all stacks. In JSON format, it provides all the metadata for all stacks. Using either the index number or name in the path, you can obtain metadata on a specific stack. When drilling down to container details, in V1 (<code class="highlighter-rouge">2015-07-25</code>), only container name(s) are returned, but in V2 (<code class="highlighter-rouge">2015-12-19</code>), container object(s) are returned.</td>
    </tr>
  </tbody>
</table>

<h3 id="versioning-of-metadata">Versioning of Metadata</h3>

<p>In the <code class="highlighter-rouge">curl</code> commands, we strongly recommend using a specific version, but you could also choose <code class="highlighter-rouge">latest</code>.</p>

<blockquote>
  <p><strong>Note:</strong> As we make changes to our <code class="highlighter-rouge">latest</code> version, the data returned may change in any release and become incompatible with your code.</p>
</blockquote>

<p>The version of the metadata service is based on date.</p>

<table>
  <thead>
    <tr>
      <th>Version Reference</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>V2</td>
      <td>2015-12-19</td>
    </tr>
    <tr>
      <td>V1</td>
      <td>2015-07-25</td>
    </tr>
  </tbody>
</table>

<h4 id="differences-in-versions">Differences in Versions</h4>

<h5 id="v1-vs-v2">V1 vs. V2</h5>

<p>When drilling down to containers using the http path ending in <code class="highlighter-rouge">/services/&lt;service-name&gt;/containers</code> or <code class="highlighter-rouge">/stacks/&lt;stack-name&gt;/services/&lt;service-name&gt;/containers</code>, V1 returns container name(s) and V2 returns container object(s). More information is provided with V2 of the metadata service.</p>

<h5 id="example">Example</h5>

<p>In Rancher, there is a stack called <code class="highlighter-rouge">foostack</code> and it contains a service called <code class="highlighter-rouge">barservice</code> with 3 containers.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># Using V1 returns only container names of the service</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-07-25/services/barservice/containers'</span>
<span class="o">[</span><span class="s2">"foostack_barservice_1"</span>, <span class="s2">"foostack_barservice_2"</span>, <span class="s2">"foostack_barservice_1"</span><span class="o">]</span>

<span class="c"># Using V2 returns container objects of the service</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-12-19/services/barservice/containers'</span>
<span class="o">[{</span><span class="s2">"create_index"</span>:1, <span class="s2">"health_state"</span>:null,<span class="s2">"host_uuid"</span>:...
...
<span class="c"># Lists all metadata for all containers of the service</span>
...
...<span class="o">}]</span>

<span class="c"># Using V2, you can drill down to a specific container's object</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-12-19/services/barservice/containers/foostack_barservice_1'</span>
<span class="o">[{</span><span class="s2">"create_index"</span>:1, <span class="s2">"health_state"</span>:null,<span class="s2">"host_uuid"</span>:...
...
<span class="c"># Lists all metadata for all containers of the service</span>
...
...<span class="o">}]</span>

<span class="c"># Using /stacks/&lt;service-name&gt;, you can drill down to services and containers</span>

<span class="c"># Using V1 returns only container names of the service</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-07-25/stacks/foostack/services/barservice/containers'</span>
<span class="o">[</span><span class="s2">"foostack_barservice_1"</span>, <span class="s2">"foostack_barservice_2"</span>, <span class="s2">"foostack_barservice_1"</span><span class="o">]</span>

<span class="c"># Using V2 returns container objects of the service</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-12-19/stacks/foostack/services/barservice/containers'</span>
<span class="o">[{</span><span class="s2">"create_index"</span>:1, <span class="s2">"health_state"</span>:null,<span class="s2">"host_uuid"</span>:...
...
<span class="c"># Lists all metadata for all containers of the service</span>
...
...<span class="o">}]</span>
</code></pre>
</div>

<h3 id="plaintext-vs-json">Plaintext vs JSON</h3>

<p>The metadata can be returned in either plaintext or JSON format. Depending on how you want to use your metadata, you can pick either format.</p>

<h4 id="plaintext">Plaintext</h4>

<p>When executing the curl command, you’ll receive plaintext for the path that was requested. You can start at the top level of the path and continue to update the path based on available keys until your metadata service provides the data you were looking for.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/2015-12-19/self/container'</span>
create_index
dns/
dns_search/
external_id
health_check_hosts/
health_state
host_uuid
hostname
ips/
labels/
memory_reservation
milli_cpu_reservation
name
network_from_container_uuid
network_uuid
ports/
primary_ip
primary_mac_address
service_index
service_name
stack_name
stack_uuid
start_count
state
system
uuid
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/2015-12-19/self/container/name'</span>
<span class="c"># Note: Curl will not provide a new line, so single values will be on same line as the command prompt</span>
Default_Example_1<span class="nv">$root</span>@&lt;container_id&gt;
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/2015-12-19/self/container/label/io.rancher.stack.name'</span>
Default<span class="nv">$root</span>@&lt;container_id&gt;
<span class="c"># Arrays can use either the index or name to go get the values</span>
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/2015-12-19/services'</span>
<span class="nv">0</span><span class="o">=</span>Example
<span class="c"># You can either user the index or name as a path</span>
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/2015-12-19/services/0'</span>
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/2015-12-19/services/Example'</span>
</code></pre>
</div>

<h4 id="json">JSON</h4>

<p>The JSON format can be retrieved by adding an <code class="highlighter-rouge">Accept: application/json</code> header to your curl command.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-12-19/self/container'</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-12-19/self/stack'</span>
<span class="c"># Retrieve the metadata for another service in the stack</span>
<span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/2015-12-19/services/&lt;service-name&gt;'</span>
</code></pre>
</div>

<h3 id="metadata-fields">Metadata Fields</h3>

<h4 id="container">Container</h4>

<table>
  <thead>
    <tr>
      <th>Fields</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">create_index</code></td>
      <td>The order number of which the container was launched in the service, i.e. 2 means it was the second container launched in the service. Note: Create_index is never reused. If you had a service with 2 containers and deleted the 2nd container, the next container that gets launched for the service would have a <code class="highlighter-rouge">create_index</code> of 3 even though there are only 2 containers in the service.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">dns</code></td>
      <td>The container’s DNS server.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">dns_search</code></td>
      <td>Search domains for the container.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">external_id</code></td>
      <td>The Docker container ID on the host</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">health_check_hosts</code></td>
      <td>List of the host UUIDs where the containers that run health checks are.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">health_state</code></td>
      <td>The state of health for the container if a <a href="/docs/rancher/v1.6/en/cattle/health-checks/">health check</a> was enabled.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">host_uuid</code></td>
      <td>Unique host identifier that Rancher server assigns to hosts</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">hostname</code></td>
      <td>The hostname of the container.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ips</code></td>
      <td>When multiple NICs are supported, it will be the list of IPs.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">labels</code></td>
      <td>List of <a href="/docs/rancher/v1.6/en/cattle/scheduling/#labels">Labels on Container</a>. Format for labels is <code class="highlighter-rouge">key</code>:<code class="highlighter-rouge">value</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">memory_reservation</code></td>
      <td>The soft limit of the amount of memory that the container can use.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">milli_cpu_reservation</code></td>
      <td>The soft limit of the amount of CPU container can use. The value is an integer representing 1/1000 of a CPU. So, 1000 would equal 1 CPU and 500 would equal half a CPU.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">name</code></td>
      <td>Name of Container</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">network_from_container_uuid</code></td>
      <td>The container’s UUID where the network is from.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">network_uuid</code></td>
      <td>Unique network identifier that Rancher assigns to networks</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ports</code></td>
      <td>List of <a href="/docs/rancher/v1.6/en/cattle/adding-services/#port-mapping">Ports used in the container</a>. Format for ports is <code class="highlighter-rouge">hostIP:publicIP:privateIP[/protocol]</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">primary_ip</code></td>
      <td>IP of container</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">primary_mac_address</code></td>
      <td>The primary MAC address of the container</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">service_index</code></td>
      <td>The last number in the container name of the service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">service_name</code></td>
      <td>Name of service (if applicable)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">stack_name</code></td>
      <td>Name of stack that the service is in (if applicable)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">stack_uuid</code></td>
      <td>Unique stack identifier that Rancher assigns to stacks</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">start_count</code></td>
      <td>The number of times the container was started.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">state</code></td>
      <td>The state of the container</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">system</code></td>
      <td>Whether or not the container is an <a href="/docs/rancher/v1.6/en/rancher-services/">infrastructure service</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">uuid</code></td>
      <td>Unique container identifier that Rancher assigns to containers</td>
    </tr>
  </tbody>
</table>

<h4 id="service">Service</h4>

<table>
  <thead>
    <tr>
      <th>Fields</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">containers</code></td>
      <td>List of container names in the service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">create_index</code></td>
      <td>Create_index of the last container created of the service. Note: Create_index is never reused. If you had a service with 2 containers and deleted the 2nd container, the create_index will be 2. The next container that gets launched for the service would update the create_index to 3 even though there are only 2 containers.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">expose</code></td>
      <td>The ports that are exposed on the host without being published on the host.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">external_ips</code></td>
      <td>List of External IPs for <a href="/docs/rancher/v1.6/en/cattle/adding-external-services/">External Services</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">fqdn</code></td>
      <td>Fqdn of the service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">health_check</code></td>
      <td>The <a href="/docs/rancher/v1.6/en/cattle/health-checks/">health check configuration</a> on the service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">hostname</code></td>
      <td>CNAME for <a href="/docs/rancher/v1.6/en/cattle/adding-external-services/">External Services</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">kind</code></td>
      <td>Type of Rancher Service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">labels</code></td>
      <td>List of <a href="/docs/rancher/v1.6/en/cattle/scheduling/#labels">Labels on Service</a>. Format for labels is <code class="highlighter-rouge">key:value</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">lb_config</code></td>
      <td>The configuration of the <a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/">load balancer</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">links</code></td>
      <td>List of linked services. Format for links is <code class="highlighter-rouge">stack_name/service_name:service_alias</code>. The <code class="highlighter-rouge">links</code> would show all the keys (i.e. <code class="highlighter-rouge">stack_name/service_name</code> for all links) and to retrieve the <code class="highlighter-rouge">service_alias</code>, you would need to drill down to the specific key.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">metadata</code></td>
      <td><a href="/docs/rancher/v1.6/en/rancher-services/metadata-service/#adding-user-metadata-to-a-service">User added metadata</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">name</code></td>
      <td>Name of Service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ports</code></td>
      <td>List of <a href="/docs/rancher/v1.6/en/cattle/adding-services/#port-mapping">Ports used in the Service</a>. Format for ports is <code class="highlighter-rouge">hostIP:publicIP:privateIP[/protocol]</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">primary_service_name</code></td>
      <td>The name of the primary service if there are sidekicks</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">scale</code></td>
      <td>Scale of Service</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">sidekicks</code></td>
      <td>List of service names that are <a href="/docs/rancher/v1.6/en/cattle/adding-services/#sidekick-services">sidekicks</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">stack_name</code></td>
      <td>Name of stack the service is part of</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">stack_uuid</code></td>
      <td>Unique stack identifier that Rancher assigns to stacks</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">system</code></td>
      <td>Whether or not the service is an <a href="/docs/rancher/v1.6/en/rancher-services/">infrastructure service</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">uuid</code></td>
      <td>Unique service identifier that Rancher assigns to services</td>
    </tr>
  </tbody>
</table>

<h4 id="stack">Stack</h4>

<table>
  <thead>
    <tr>
      <th>Fields</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">environment_name</code></td>
      <td>Name of <a href="/docs/rancher/v1.6/en/environments/">Environment</a> that the Stack is in</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">environment_uuid</code></td>
      <td>Unique stack identifier that Rancher assigns to stacks</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">name</code></td>
      <td>Name of <a href="/docs/rancher/v1.6/en/cattle/stacks/">Stack</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">services</code></td>
      <td>List of Services in the Stack</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">system</code></td>
      <td>Whether or not the stack is an <a href="/docs/rancher/v1.6/en/rancher-services/">infrastructure service</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">uuid</code></td>
      <td>Unique stack identifier that Rancher assigns to stacks</td>
    </tr>
  </tbody>
</table>

<h4 id="host">Host</h4>

<table>
  <thead>
    <tr>
      <th>Fields</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">agent_ip</code></td>
      <td>IP of the Rancher Agent, i.e. the value of the <code class="highlighter-rouge">CATTLE_AGENT_IP</code> environment variable.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">hostname</code></td>
      <td>Name of <a href="/docs/rancher/v1.6/en/hosts/">Host</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">labels</code></td>
      <td>List of <a href="/docs/rancher/v1.6/en/hosts/#host-labels">Host Labels</a>. Format for labels is <code class="highlighter-rouge">key:value</code>.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">local_storage_mb</code></td>
      <td>Amount of storage on the host in MB</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">memory</code></td>
      <td>Amount of memory on the host in MB</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">milli_cpu</code></td>
      <td>Amount of CPU on the host. The value is an integer representing 1/1000 of a cpu. So, 1000 would equal 1 CPU.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">name</code></td>
      <td>Name of <a href="/docs/rancher/v1.6/en/hosts/">Host</a></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">uuid</code></td>
      <td>Unique host identifier that Rancher server assigns to hosts</td>
    </tr>
  </tbody>
</table>

<h3 id="adding-user-metadata-to-a-service">Adding User Metadata To a Service</h3>

<p>Rancher allows users to add in their own metadata to a service. Currently, this is only supported through <a href="/docs/rancher/v1.6/en/cattle/rancher-compose/">Rancher Compose</a> and the metadata is part of the <code class="highlighter-rouge">rancher-compose.yml</code> file. In the <code class="highlighter-rouge">metadata</code> key, the yaml will be parsed into JSON format to be used by the metadata-service.</p>

<h4 id="example-rancher-composeyml">Example <code class="highlighter-rouge">rancher-compose.yml</code></h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="s">service</span><span class="pi">:</span>
  <span class="c1"># Scale of service</span>
  <span class="s">scale</span><span class="pi">:</span> <span class="s">3</span>
  <span class="c1"># User added metadata</span>
  <span class="s">metadata</span><span class="pi">:</span>
    <span class="s">example</span><span class="pi">:</span>
      <span class="s">name</span><span class="pi">:</span> <span class="s">hello</span>
      <span class="s">value</span><span class="pi">:</span> <span class="s">world</span>
    <span class="s">example2</span><span class="pi">:</span>
      <span class="s">foo</span><span class="pi">:</span> <span class="s">bar</span>

</code></pre>
</div>

<p>After the service is up, you can find metadata using the metadata service in <code class="highlighter-rouge">.../self/service/metadata</code> or in <code class="highlighter-rouge">.../services/&lt;service_id&gt;/metadata</code>.</p>

<h4 id="json-query">JSON Query</h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl --header <span class="s1">'Accept: application/json'</span> <span class="s1">'http://rancher-metadata/latest/self/service/metadata'</span>
<span class="o">{</span><span class="s2">"example"</span>:<span class="o">{</span><span class="s2">"name"</span>:<span class="s2">"hello"</span>,<span class="s2">"value"</span>:<span class="s2">"world"</span><span class="o">}</span>,<span class="s2">"example2"</span>:<span class="o">{</span><span class="s2">"foo"</span>:<span class="s2">"bar"</span><span class="o">}}</span>

</code></pre>
</div>

<h4 id="plaintext-queries">Plaintext Queries</h4>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/latest/self/service/metadata'</span>
example/
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/latest/self/service/metadata/example'</span>
name
value
<span class="gp">$ </span>curl <span class="s1">'http://rancher-metadata/latest/self/service/metadata/example/name'</span>
<span class="c"># Note: Curl will not provide a new line, so single values will be on same line as the command prompt</span>
hello<span class="nv">$root</span>@&lt;container_id&gt;
</code></pre>
</div>


          <footer class="clearfix">
            <div class="copyright pull-left">Copyright &copy; 2014-2017 <a href="http://rancher.com">Rancher Labs</a>.  All Rights Reserved.</div>
            <a class="btn btn-primary pull-right" href="https://github.com/rancher/rancher.github.io/tree/master/rancher/v1.6/en/rancher-services/metadata-service/index.md">Edit this page <i class="fa fa-pencil"></i></a>
          </footer>
        </div>
      </div>
    </div>

    <script src="/docs/vendor/jquery.js?t=2017-09-13 18:12:52 -0700"></script>
    <script src="/docs/js/jquery.slicknav.min.js?t=2017-09-13 18:12:52 -0700"></script>
    <script src="/docs/js/rancher-docs.js?t=2017-09-13 18:12:52 -0700"></script>

    <!-- Start of Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-56382716-3', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End of Google Analytics -->

    <!-- Start of Async HubSpot Analytics Code -->
    <script type="text/javascript">
    (function(d,s,i,r) {
    if (d.getElementById(i)){return;}
    var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
    n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/468859.js';
    e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
    </script>
    <!-- End of Async HubSpot Analytics Code -->
  </body>
</html>

