<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Installing Rancher Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Documentation for Rancher">
    <link href="/docs/favicon.png" rel="shortcut icon" type="image/png" sizes="16x16">
    <link href="/docs/css/syntax.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/vendor/font-awesome/css/font-awesome.min.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/vendor/lato/lato.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/lacsso.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/slicknav.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
    <link href="/docs/css/rancher-docs.css?t=2017-09-13 18:12:52 -0700" rel="stylesheet">
  </head>
  <body class="bg-default">
    <div class="row body">
      <header id="header" class="section">
        <nav class="row" role="navigation">
          <div class="col span-3">
          <a class="navbar-brand" href="/"><img src="/docs/img/rancher-logo-nopadding.svg" width="200px" style="padding-left: 20px" /></a>
          </div>

          <div class="col span-5 offset-3">
            <!--Start Google Search-->
            <div class="gcse-search" id="google-search"></div>
            <script>
              var match = window.location.pathname.match(/\/rancher\/([^\/]+)/);
              if ( match ) {
                document.getElementById('google-search').setAttribute('data-defaultToRefinement', match[1]);
              }

              (function() {
                var cx = '007896692384436596364:60akf3bfmxm';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
            <!--End Google Search-->
          </div>
        </nav>
      </header>
      <div class="col span-3 mt-0 mr-0 sidebar">

<ul id="menu">
    <li><a href="/docs/rancher/v1.6/en/">Overview</a></li>
    <li><a href="/docs/rancher/v1.6/en/quick-start-guide/">Quick Start Guide</a></li>
    <li>
        <a href="#">Installing Rancher<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/">Rancher Server</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#requirements">Rancher Server Requirements</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#rancher-server-tags">Rancher Server Tags</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container">Launching Rancher Server</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#multi-nodes">Setting up HA</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#requirements-for-ha">HA Requirements</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container-external-database">Using an External DB</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#single-container-bind-mount">Bind Mounted MySQL Volume</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#elb">Using an ELB in AWS</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#ldap">Using LDAP/AD with TLS</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/#http-proxy">Behind an HTTP Proxy</a></li>
          <li><a href="/docs/rancher/v1.6/en/installing-rancher/selinux/">SELinux Requirements for RHEL/CentOS</a></li>
          <li>
               <a href="#">Basic SSL Configuration<i class="pull-right fa fa-angle-down"></i></a>
               <ul>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#requirements">Requirements</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-nginx-configuration">Example NGINX Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-apache-configuration">Example Apache Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-haproxy-configuration">Example HAProxy Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#example-f5-big-ip-configuration">Example F5 BIG-IP Configuration</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#elb">Using an ELB in AWS with SSL</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#using-self-signed-certs-beta">Using Self Signed Certs</a></li>
               </ul>
          </li>
          <li>
               <a href="#">No Internet Access<i class="pull-right fa fa-angle-down"></i></a>
               <ul>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/no-internet-access/#using-a-private-registry">Using a Private Registry</a></li>
                 <li><a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/no-internet-access/#using-an-http-proxy">Using an HTTP Proxy</a></li>
               </ul>
          </li>
        </ul>
    </li>
    <li>
         <a href="#">Upgrading Rancher<i class="pull-right fa fa-angle-down"></i></a>
         <ul>
           <li><a href="/docs/rancher/v1.6/en/upgrading/">Upgrading Rancher</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#rancher-server-tags">Rancher Server Tags</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#infrastructure-services">Upgrading Infrastructure Services</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#multi-nodes">Upgrading Rancher HA Setup</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#single-container-external-database">Using an external DB</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#single-container-bind-mount">Bind Mounted MySQL Volume</a></li>
           <li><a href="/docs/rancher/v1.6/en/upgrading/#rancher-server-with-no-internet-access">No Internet Access</a></li>
        </ul>
     </li>
    <li>
         <a href="#">Rancher Configuration<i class="pull-right fa fa-angle-down"></i></a>
         <ul>
           <li>
                <a href="#">Access Control Providers<i class="pull-right fa fa-angle-down"></i></a>
                <ul>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#active-directory">Active Directory</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#azure-ad">Azure AD</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#github">Github</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#local-authentication">Local Authentication</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#openldap">OpenLDAP</a></li>
                  <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#shibboleth">Shibboleth/SAML</a></li>
                </ul>
          </li>
          <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#site-access">Rancher Site Access</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/access-control/#restricting-concurrent-sessions">Restricting Concurrent Sessions</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/accounts/">Accounts</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/settings/#host-registration">Host Registration</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/settings/#catalog">Enabling Catalogs</a></li>
          <li><a href="/docs/rancher/v1.6/en/configuration/machine-drivers/">Machine Drivers</a></li>
        </ul>
    </li>
    <li>
          <a href="#">Environments<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
            <li><a href="/docs/rancher/v1.6/en/environments/">Managing Environments</a></li>
            <li><a href="/docs/rancher/v1.6/en/environments/#what-is-an-environment-template">Environment Templates</a></li>
            <li><a href="/docs/rancher/v1.6/en/environments/#membership-roles">Roles in an Environment</a></li>
          </ul>
    </li>
    <li>
        <a href="#">Hosts<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
          <li><a href="/docs/rancher/v1.6/en/hosts/">Getting Started with Hosts</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#supported-docker-versions">Supported Docker Versions</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#host-labels">Adding Host Labels</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#scheduler-ips">Adding Scheduler IPs</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#hosts-behind-an-http-proxy">Behind an HTTP Proxy</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/custom/">Adding Custom Hosts</a></li>
          <li>
              <a href="#">Adding Cloud Provided Hosts<i class="pull-right fa fa-angle-down"></i></a>
              <ul>
                <li><a href="/docs/rancher/v1.6/en/hosts/amazon/">Adding Amazon EC2 Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/azure/">Adding Azure Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/digitalocean/">Adding DigitalOcean Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/exoscale/">Adding Exoscale Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/packet/">Adding Packet Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/rackspace/">Adding Rackspace Hosts</a></li>
                <li><a href="/docs/rancher/v1.6/en/hosts/other/">Adding Hosts from Other Cloud Providers</a></li>
              </ul>
          </li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#accessing-hosts-from-the-cloud-providers">Accessing Cloud Provided Hosts</a></li>
          <li><a href="/docs/rancher/v1.6/en/hosts/#removing-hosts">Removing Hosts</a></li>
        </ul>
    </li>
    <li>
      <a href="#">Registries<i class="pull-right fa fa-angle-down"></i></a>
      <ul>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/">Adding Private Registries</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#insecure-registries">Insecure Registries</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#self-signed-certificates">Self Signed Certificates</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#using-amazons-ecr-registry">Using Amazon's ECR</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#using-google-container-registry">Using Google Container Registry</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#changing-the-default-registry">Changing the Default Registry</a></li>
        <li><a href="/docs/rancher/v1.6/en/environments/registries/#limiting-which-registries-can-be-used">Limiting Registries</a></li>
      </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/environments/certificates/">Certificates</a></li>
    <li>
      <a href="#">Infrastructure Services<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/">Infrastructure Services</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/networking/">Networking</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/network-policy/">Network Policies</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/load-balancer">Load Balancer</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/dns-service/">DNS Service</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/metadata-service/">Metadata Service</a></li>
              <li>
                  <a href="#">Persistent Storage Service<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/">Persistent Storage Service</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/rancher-nfs/">Rancher NFS</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/storage-service/rancher-ebs/">Rancher EBS</a></li>
                  </ul>
              </li>
              <li>
                  <a href="#">External Scheduler<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/">External Scheduler</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#multiple-ips">Scheduling against multiple IPs</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#resource-constraints">Scheduling with Resource Constraints</a></li>
                      <li><a href="/docs/rancher/v1.6/en/rancher-services/scheduler/#restrict-services-on-host">Scheduling only Specific Services on a Host</a></li>
                  </ul>
              </li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/audit-log/">Audit Logging</a></li>
              <li><a href="/docs/rancher/v1.6/en/rancher-services/service-accounts/">Service Accounts</a></li>
           </ul>
    </li>
    <li>
          <a href="#">Cattle<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
                <li><a href="/docs/rancher/v1.6/en/cattle/stacks/">Stacks</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-services/">Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/volumes/">Volumes</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/">Load Balancers</a></li>
                <li>
                    <a href="#">Load Balancer Options in the UI<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#adding-a-load-balancer-in-the-ui">Adding Load Balancers</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#service-rule">Targeting Specific Services</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#selector-rule">Targeting Services based on Selectors</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#ssl-termination">SSL Termination</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#stickiness-policy-for-load-balancers">Stickiness Policy</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#custom-haproxy-configuration">Custom HAProxy Configuration</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#labelsscheduling-load-balancers">Labels and Scheduling</a></li>
                      </ul>
                </li>
                <li>
                    <a href="#">Load Balancer Options with CLI and Compose<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#adding-a-load-balancer-with-rancher-compose">Adding Load Balancers</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#source-ports">Defining Source Ports</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#port-rules">Port Rules</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#certificates">Certificates</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#custom-configuration">Custom HAProxy Configuration</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#stickiness-policy">Stickiness Policy</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#load-balancer-example-l7">Example of L7 Load Balancer</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#internal-load-balancer-example">Example of Internal Load Balancer</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/adding-load-balancers/#ssl-termination-example">Example of SSL Termination with a Load Balancer</a></li>
                      </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-external-services/">External Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/adding-service-alias/">Service Alias</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/health-checks/">Health Checks</a></li>
                <li>
                    <a href="#">Scheduling Services<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/">Scheduling</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#scheduling-options-in-the-ui">Scheduling in the UI</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#adding-labels-in-rancher-compose">Scheduling in Rancher Compose</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/scheduling/#table-of-scheduling-labels">Table of Scheduling Labels</a></li>
                    </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/upgrading/">Upgrading Services</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/internal-dns-service/">Internal DNS Service in Cattle Environments</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/external-dns-service/">External DNS Service</a></li>
                <li>
                    <a href="#">Rancher-Compose<i class="pull-right fa fa-angle-down"></i></a>
                    <ul>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/">Rancher Compose</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/commands/">Commands and Options</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/environment-interpolation/">Environment Interpolation</a></li>
                        <li><a href="/docs/rancher/v1.6/en/cattle/rancher-compose/build/">Building with AWS S3</a></li>
                    </ul>
                </li>
                <li><a href="/docs/rancher/v1.6/en/cattle/secrets/">Secrets - Experimental</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/webhook-service/">Webhooks</a></li>
                <li><a href="/docs/rancher/v1.6/en/cattle/labels/">Labels in Cattle</a></li>
          </ul>
    </li>
    <li>
          <a href="#">Kubernetes<i class="pull-right fa fa-angle-down"></i></a>
          <ul>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/">Launching Kubernetes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/resiliency-planes/">Resiliency Planes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/providers/">Cloud Providers</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/private-registry/">Private Registry</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/rbac/">RBAC</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/disaster-recovery/">Disaster Recovery</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/backups/">Backups</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/storage/">Persistent Storage</a></li>
              <li>
                  <a href="#">Add-ons Support<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/">Add-ons Support</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/#helm">Helm</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/addons/#skydns">SkyDNS</a></li>
                  </ul>
              </li>
              <li>
                  <a href="#">Ingress Support and Options<i class="pull-right fa fa-angle-down"></i></a>
                  <ul>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/">Ingress Support</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#host-based-routing">Host Based Routing</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#path-based-routing">Path Based Routing</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#scale-and-other-port">Multiple Load Balancers and Selecting Ports</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#tls">Using TLS</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#blocking-http">Blocking HTTP</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#custom-haproxy">Custom HAProxy</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#scheduled-globally">Scheduling on all Hosts</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#host-scheduling">Scheduling on a specific Host</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#only-local">Targeting Only Containers on the Same Host</a></li>
                      <li><a href="/docs/rancher/v1.6/en/kubernetes/ingress/#prefer-local">Prioritizing Containers on the Same Host</a></li>
                  </ul>
              </li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/upgrading/">Upgrading Kubernetes</a></li>
              <li><a href="/docs/rancher/v1.6/en/kubernetes/deleting/">Deleting Kubernetes</a></li>

          </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/mesos/">Mesos</a></li>
    <li><a href="/docs/rancher/v1.6/en/swarm/">Swarm - Experimental </a></li>
    <li><a href="/docs/rancher/v1.6/en/windows/">Windows - Experimental</a></li>
    <li><a href="/docs/rancher/v1.6/en/native-docker/">Using Native Docker CLI</a></li>
    <li>
            <a href="#">Rancher Catalog<i class="pull-right fa fa-angle-down"></i></a>
            <ul>
                <li><a href="/docs/rancher/v1.6/en/catalog/">Catalog</a></li>
                <li><a href="/docs/rancher/v1.6/en/catalog/private-catalog/">Creating Private Catalogs</a></li>
            </ul>
        </li>
    <li><a href="#">Rancher CLI<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.6/en/cli/">Rancher CLI</a></li>
            <li><a href="/docs/rancher/v1.6/en/cli/commands/">Commands and Options</a></li>
            <li><a href="/docs/rancher/v1.6/en/cli/variable-interpolation/">Variable Interpolation</a></li>
        </ul>
    </li>
    <li><a href="/docs/rancher/v1.6/en/api/v2-beta/">API Documentation</a></li>
    <li><a href="/docs/rancher/v1.6/en/contributing/">Contributing to Rancher</a></li>
    <li>
        <a href="#">FAQs<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.6/en/faqs/server/">FAQs about Rancher Server</a></li>
            <li><a href="/docs/rancher/v1.6/en/faqs/agents/">FAQs about Rancher Agents/Hosts</a></li>
            <li><a href="/docs/rancher/v1.6/en/faqs/troubleshooting/">Troubleshooting FAQS</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Docs Archive<i class="pull-right fa fa-angle-down"></i></a>
        <ul>
            <li><a href="/docs/rancher/v1.5/en/">Rancher v1.5</a></li>
            <li><a href="/docs/rancher/v1.4/en/">Rancher v1.4</a></li>
            <li><a href="/docs/rancher/v1.3/en/">Rancher v1.3</a></li>
            <li><a href="/docs/rancher/v1.2/en/">Rancher v1.2</a></li>
            <li><a href="/docs/rancher/v1.1/en/">Rancher v1.1</a></li>
            <li><a href="/docs/rancher/v1.0/en/">Rancher v1.0</a></li>
        </ul>
    </li>
</ul>

      </div>

      <div class="col span-8">
        <div class="content-container">
          <h2 id="installing-rancher-server">Installing Rancher Server</h2>
<hr />
<p>Rancher is deployed as a set of Docker containers. Running Rancher is as simple as launching two containers. One container as the management server and another container on a node as an agent.</p>

<ul>
  <li><a href="#single-container">Rancher Server - Single Container (non-HA)</a></li>
  <li><a href="#single-container-external-database">Rancher Server - Single Container (non-HA) - External database</a></li>
  <li><a href="#single-container-bind-mount">Rancher Server - Single Container (non-HA)- Bind mounted MySQL volume</a></li>
  <li><a href="#multi-nodes">Rancher Server - Full Active/Active HA</a></li>
  <li><a href="#elb">Rancher Server - Using ELB in AWS</a></li>
  <li><a href="#ldap">Rancher Server - AD/OpenLDAP using TLS</a></li>
  <li><a href="#http-proxy">Rancher Server - HTTP Proxy</a></li>
  <li><a href="#mysql-ssl">Rancher Server - MySQL over SSL</a></li>
</ul>

<blockquote>
  <p><strong>Note:</strong> You can get all help options for the Rancher server container by running <code class="highlighter-rouge">docker run rancher/server --help</code>.</p>
</blockquote>

<h3 id="requirements">Requirements</h3>

<ul>
  <li>Any modern Linux distribution with a <a href="/docs/rancher/v1.6/en/hosts/#supported-docker-versions">supported version of Docker</a>. <a href="http://docs.rancher.com/os/">RancherOS</a>, Ubuntu, RHEL/CentOS 7 are more heavily tested.
    <ul>
      <li>For RHEL/CentOS, the default storage driver, i.e. devicemapper using loopback, is not recommended by <a href="https://docs.docker.com/engine/reference/commandline/dockerd/#/storage-driver-options">Docker</a>. Please refer to the Docker documentation on how to change it.</li>
      <li>For RHEL/CentOS, if you want to enable SELinux, you will need to <a href="/docs/rancher/v1.6/en/installing-rancher/selinux/">install an additional SELinux module</a>.</li>
    </ul>
  </li>
  <li>1GB RAM</li>
  <li>MySQL server should have a max_connections setting &gt; 150
    <ul>
      <li>MYSQL Configuration Requirements
        <ul>
          <li>Option 1: Run with Antelope with default of <code class="highlighter-rouge">COMPACT</code></li>
          <li>Option 2: Run MySQL 5.7 with Barracuda where the default <code class="highlighter-rouge">ROW_FORMAT</code> is <code class="highlighter-rouge">Dynamic</code></li>
        </ul>
      </li>
      <li>Recommended settings:
        <ul>
          <li><code class="highlighter-rouge">max_packet_size</code> &gt;= 32M</li>
          <li><code class="highlighter-rouge">innodb_log_file_size</code> &gt;= 256M (If you have an existing DB, please make sure to appropriate plan how to change this setting.)</li>
          <li><code class="highlighter-rouge">innodb_file_per_table=1</code></li>
          <li><code class="highlighter-rouge">innodb_buffer_pool_size</code> &gt;= 1GB (For larger installs, 4-8G pools on dedicated MySQL servers)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Note:</strong> Currently, Docker for Mac is not supported in Rancher.</p>
</blockquote>

<h3 id="rancher-server-tags">Rancher Server Tags</h3>

<p>Rancher server has 2 different tags. For each major release tag, we will provide documentation for the specific version.</p>

<ul>
  <li><code class="highlighter-rouge">rancher/server:latest</code> tag will be our latest development builds. These builds will have been validated through our CI automation framework. These releases are not meant for deployment in production.</li>
  <li><code class="highlighter-rouge">rancher/server:stable</code> tag will be our latest stable release builds. This tag is the version that we recommend for production.</li>
</ul>

<p>Please do not use any release with a <code class="highlighter-rouge">rc{n}</code> suffix. These <code class="highlighter-rouge">rc</code> builds are meant for the Rancher team to test out builds.</p>

<p><a id="single-container"></a></p>

<h3 id="launching-rancher-server---single-container-non-ha">Launching Rancher Server - Single Container (non-HA)</h3>

<p>On the Linux machine with Docker installed, the command to start a single instance of Rancher is simple.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo docker run -d --restart<span class="o">=</span>unless-stopped -p 8080:8080 rancher/server
</code></pre>
</div>

<h3 id="rancher-ui">Rancher UI</h3>

<p>The UI and API will be available on the exposed port <code class="highlighter-rouge">8080</code>. After the docker image is downloaded, it will take a minute or two before Rancher has successfully started and is available to view.</p>

<p>Navigate to the following URL: <code class="highlighter-rouge">http://&lt;SERVER_IP&gt;:8080</code>. The <code class="highlighter-rouge">&lt;SERVER_IP&gt;</code> is the public IP address of the host that is running Rancher server.</p>

<p>Once the UI is up and running, you can start by <a href="/docs/rancher/v1.6/en/hosts/">adding hosts</a> or select a container orchestration from the Infrastructure catalog. By default, if a different container orchestration type is not selected, the environment will be using cattle. After the hosts are added into Rancher, you can start adding <a href="/docs/rancher/v1.6/en/cattle/adding-services/">services</a> or launch templates from the <a href="/docs/rancher/v1.6/en/catalog/">Rancher catalog</a>.</p>

<p><a id="single-container-external-database"></a></p>

<h3 id="launching-rancher-server---single-container---external-database">Launching Rancher Server - Single Container - External Database</h3>

<p>Instead of using the internal database that comes with Rancher server, you can start Rancher server pointing to an external database. The command would be the same, but appending in additional arguments to direct how to connect to your external database.</p>

<blockquote>
  <p><strong>Note:</strong> Your database, name and user of the database will already need to be created, but no schemas will need to be created. Rancher will automatically create all the schemas related to Rancher.</p>
</blockquote>

<p>Here is an example of a SQL command to create a database and users.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">cattle</span> <span class="k">COLLATE</span> <span class="o">=</span> <span class="s1">'utf8_general_ci'</span> <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="o">=</span> <span class="s1">'utf8'</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">cattle</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'cattle'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cattle'</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">cattle</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'cattle'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cattle'</span><span class="p">;</span>
</code></pre>
</div>

<p>To start Rancher connecting to an external database, you pass in additional arguments as part of the command for the container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo docker run -d --restart<span class="o">=</span>unless-stopped -p 8080:8080 rancher/server <span class="se">\</span>
    --db-host myhost.example.com --db-port 3306 --db-user username --db-pass password --db-name cattle
</code></pre>
</div>

<p>Most of the options to pass in also have default values and are not required. Only the location of the MySQL server is required.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>--db-host               IP or hostname of MySQL server
--db-port               port of MySQL server <span class="o">(</span>default: 3306<span class="o">)</span>
--db-user               username <span class="k">for </span>MySQL login <span class="o">(</span>default: cattle<span class="o">)</span>
--db-pass               password <span class="k">for </span>MySQL login <span class="o">(</span>default: cattle<span class="o">)</span>
--db-name               MySQL database name to use <span class="o">(</span>default: cattle<span class="o">)</span>
</code></pre>
</div>

<p><br /></p>

<blockquote>
  <p><strong>Note:</strong> In previous versions of Rancher server, we had connected to an external database using environment variables, those environment variables will continue to work, but Rancher recommends using the arguments instead.</p>
</blockquote>

<p><a id="single-container-bind-mount"></a></p>

<h3 id="launching-rancher-server---single-container---bind-mount-mysql-volume">Launching Rancher Server - Single Container - Bind Mount MySQL Volume</h3>

<p>If you would like to persist the database inside your container to a volume on your host, launch Rancher server by bind mounting the MySQL volume.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo docker run -d -v &lt;host_vol&gt;:/var/lib/mysql --restart<span class="o">=</span>unless-stopped -p 8080:8080 rancher/server
</code></pre>
</div>
<p>With this command, the database will persist on the host. If you have an existing Rancher container and would like to bind mount the MySQL volume, the instructions are located in our <a href="/docs/rancher/v1.6/en/upgrading/#single-container-bind-mount">upgrading documentation</a>.</p>

<p><a id="multi-nodes"></a></p>

<h3 id="launching-rancher-server---full-activeactive-ha">Launching Rancher Server - Full Active/Active HA</h3>

<p>Running Rancher server in High Availability (HA) is as easy as running <a href="#using-an-external-database">Rancher server using an external database</a>, exposing an additional port, and adding in an additional argument to the command for the external load balancer.</p>

<h4 id="requirements-for-ha">Requirements for HA</h4>

<ul>
  <li>HA Nodes:
    <ul>
      <li>Any modern Linux distribution with a <a href="/docs/rancher/v1.6/en/hosts/#supported-docker-versions">supported version of Docker</a>. <a href="http://docs.rancher.com/os/">RancherOS</a>, Ubuntu, RHEL/CentOS 7 are more heavily tested.
        <ul>
          <li>For RHEL/CentOS, the default storage driver, i.e. devicemapper using loopback, is not recommended by <a href="https://docs.docker.com/engine/reference/commandline/dockerd/#/storage-driver-options">Docker</a>. Please refer to the Docker documentation on how to change it.</li>
          <li>For RHEL/CentOS, if you want to enable SELinux, you will need to <a href="/docs/rancher/v1.6/en/installing-rancher/selinux/">install an additional SELinux module</a>.</li>
        </ul>
      </li>
      <li>Ports that needs to be opened between nodes: <code class="highlighter-rouge">9345</code>, <code class="highlighter-rouge">8080</code></li>
      <li>1GB RAM</li>
    </ul>
  </li>
  <li>MySQL database
    <ul>
      <li>At least 1 GB RAM</li>
      <li>50 connections per Rancher server node (e.g. A 3 node setup will need to support at least 150 connections)</li>
      <li>MYSQL Configuration Requirements
        <ul>
          <li>Option 1: Run with Antelope with default of <code class="highlighter-rouge">COMPACT</code></li>
          <li>Option 2: Run MySQL 5.7 with Barracuda where the default <code class="highlighter-rouge">ROW_FORMAT</code> is <code class="highlighter-rouge">Dynamic</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>External Load Balancer
    <ul>
      <li>Port that needs to be opened between nodes and external load balancer: <code class="highlighter-rouge">8080</code></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Note:</strong> Currently, Docker for Mac is not supported in Rancher.</p>
</blockquote>

<h4 id="recommendations-for-larger-deployments">Recommendations for Larger Deployments</h4>

<ul>
  <li>Each Rancher server node should have a 4 GB or 8 GB heap size, which requires having at least 8 GB or 16 GB of RAM</li>
  <li>MySQL database should have fast disks</li>
  <li>For true HA, a replicated MySQL database with proper backups is recommended. Using Galera and forcing writes to a single node, due to transaction locks, would be an alternative.</li>
</ul>

<ol>
  <li>
    <p>On each of your nodes that you want to add into the HA setup, run the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c"># Launch on each node in your HA cluster</span>
<span class="gp">$ </span>docker run -d --restart<span class="o">=</span>unless-stopped -p 8080:8080 -p 9345:9345 rancher/server <span class="se">\</span>
     --db-host myhost.example.com --db-port 3306 --db-user username --db-pass password --db-name cattle <span class="se">\</span>
     --advertise-address &lt;IP_of_the_Node&gt;
</code></pre>
    </div>

    <p>For each node, the <code class="highlighter-rouge">&lt;IP_of_the_Node&gt;</code> will be unique to each node, as it will be the IP of each specific node that is being added into the HA setup.</p>

    <p>If you change <code class="highlighter-rouge">-p 8080:8080</code> to expose the HTTP port to a different port on the host, you will need to add <code class="highlighter-rouge">--advertise-http-port &lt;host_port&gt;</code> to the command.</p>

    <blockquote>
      <p><strong>Note:</strong> You can get the help for the commands by running <code class="highlighter-rouge">docker run rancher/server --help</code></p>
    </blockquote>
  </li>
  <li>
    <p>Configure an external load balancer that will balance traffic on ports <code class="highlighter-rouge">80</code> and <code class="highlighter-rouge">443</code> across a pool of nodes that will be running Rancher server and target the nodes on port <code class="highlighter-rouge">8080</code>. Your load balancer must support websockets and forwarded-for headers, in order for Rancher to function properly. See <a href="/docs/rancher/v1.6/en//installing-rancher/installing-server/basic-ssl-config/">SSL settings page</a> for example configuration settings.</p>
  </li>
</ol>

<h4 id="notes-on-the-rancher-server-nodes-in-ha">Notes on the Rancher Server Nodes in HA</h4>

<p>If the IP of your Rancher server node changes, your node will no longer be part of the Rancher HA cluster. You must stop the old Rancher server container using the incorrect IP for <code class="highlighter-rouge">--advertise-address</code> and start a new Rancher server with the correct IP for <code class="highlighter-rouge">--advertise-address</code>.</p>

<p><a id="elb"></a></p>

<h3 id="running-rancher-server-behind-an-elasticclassic-load-balancer-elb-in-aws">Running Rancher Server Behind an Elastic/Classic Load Balancer (ELB) in AWS</h3>

<p>We recommend using an ELB in AWS in front of your Rancher servers. In order for ELB to work correctly with Rancher’s websockets, you will need to enable proxy protocol mode and ensure HTTP support is disabled. By default, ELB is enabled in HTTP/HTTPS mode, which does not support websockets. Special attention must be paid to listener configuration.</p>

<p>If you have issues with ELB setup, we recommend trying the <a href="#configuring-using-terraform">terraform version</a> as this reduces the opportunity to miss a setting.</p>

<blockquote>
  <p><strong>Note:</strong> If you are using a self signed certificate, please read more about how to <a href="/docs/rancher/v1.6/en/installing-rancher/installing-server/basic-ssl-config/#elb">configure your ELB in AWS under our SSL section</a>.</p>
</blockquote>

<h4 id="listener-configuration---plaintext">Listener Configuration - Plaintext</h4>

<p>For simple, unencrypted load balancing purposes, the following listener configuration is required:</p>

<table>
  <thead>
    <tr>
      <th>Configuration Type</th>
      <th>Load Balancer Protocol</th>
      <th>Load Balancer Port</th>
      <th>Instance Protocol</th>
      <th>Instance Port</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Plaintext</td>
      <td>TCP</td>
      <td>80</td>
      <td>TCP</td>
      <td>8080  (or the port used with <code class="highlighter-rouge">--advertise-http-port</code> when launching Rancher server)</td>
    </tr>
  </tbody>
</table>

<h4 id="enabling-proxy-protocol">Enabling Proxy Protocol</h4>

<p>In order for websockets to function properly, the ELB proxy protocol policy must be applied.</p>

<ul>
  <li>Enable <a href="http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/enable-proxy-protocol.html">proxy protocol</a> mode</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>$ aws elb create-load-balancer-policy --load-balancer-name &lt;LB_NAME&gt; --policy-name &lt;POLICY_NAME&gt; --policy-type-name ProxyProtocolPolicyType --policy-attributes AttributeName=ProxyProtocol,AttributeValue=true
$ aws elb set-load-balancer-policies-for-backend-server --load-balancer-name &lt;LB_NAME&gt; --instance-port 443 --policy-names &lt;POLICY_NAME&gt;
$ aws elb set-load-balancer-policies-for-backend-server --load-balancer-name &lt;LB_NAME&gt; --instance-port 8080 --policy-names &lt;POLICY_NAME&gt;
</code></pre>
</div>

<ul>
  <li>Health check can be configured to use HTTP:8080 using <code class="highlighter-rouge">/ping</code> as your path.</li>
</ul>

<h4 id="configuring-using-terraform">Configuring using Terraform</h4>

<p>The following can be used as an example for configuring with Terraform:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>resource "aws_elb" "lb" {
  name               = "&lt;LB_NAME&gt;"
  availability_zones = ["us-west-2a","us-west-2b","us-west-2c"]
  security_groups = ["&lt;SG_ID&gt;"]

  listener {
    instance_port     = 8080
    instance_protocol = "tcp"
    lb_port           = 443
    lb_protocol       = "ssl"
    ssl_certificate_id = "&lt;IAM_PATH_TO_CERT&gt;"
  }

}

resource "aws_proxy_protocol_policy" "websockets" {
  load_balancer  = "${aws_elb.lb.name}"
  instance_ports = ["8080"]
}
</code></pre>
</div>

<p><a id="alb"></a></p>

<h3 id="running-rancher-server-behind-an-application-load-balancer-alb-in-aws">Running Rancher Server Behind an Application Load Balancer (ALB) in AWS</h3>

<p>We no longer recommend Application Load Balancer (ALB) in AWS over using the Elastic/Classic Load Balancer (ELB). If you still choose to use an ALB, you will need to direct the traffic to the HTTP port on the nodes, which is <code class="highlighter-rouge">8080</code> by default.</p>

<p><a id="ldap"></a></p>

<h3 id="enabling-active-directory-or-openldap-for-tls">Enabling Active Directory or OpenLDAP for TLS</h3>

<p>In order to enable Active Directory or OpenLDAP for Rancher server with TLS, the Rancher server container will need to be started with the LDAP certificate, provided by your LDAP setup. On the Linux machine that you want to launch Rancher server on, save the certificate.</p>

<p>Start Rancher by bind mounting the volume that has the certificate. The certificate <strong>must</strong> be called <code class="highlighter-rouge">ca.crt</code> inside the container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo docker run -d --restart<span class="o">=</span>unless-stopped -p 8080:8080 <span class="se">\</span>
  -v /some/dir/cert.crt:/var/lib/rancher/etc/ssl/ca.crt rancher/server
</code></pre>
</div>

<p>You can check that the <code class="highlighter-rouge">ca.crt</code> was passed to Rancher server container successfully by checking the logs of the rancher server container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>docker logs &lt;SERVER_CONTAINER_ID&gt;
</code></pre>
</div>

<p>In the beginning of the logs, there will be confirmation that the certificate was added correctly.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Adding ca.crt to Certs.
Updating certificates <span class="k">in</span> /etc/ssl/certs... 1 added, 0 removed; <span class="k">done</span>.
Running hooks <span class="k">in</span> /etc/ca-certificates/update.d....done.
Certificate was added to keystore
</code></pre>
</div>

<p><a id="http-proxy"></a></p>

<h3 id="launching-rancher-server-behind-an-http-proxy">Launching Rancher Server behind an HTTP proxy</h3>

<p>In order to set up an HTTP proxy, the Docker daemon will need to be modified to point to the proxy. Before starting Rancher server, edit the <code class="highlighter-rouge">/etc/default/docker</code> file to point to your proxy and restart Docker.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo vi /etc/default/docker
</code></pre>
</div>

<p>In the file, edit the <code class="highlighter-rouge">#export http_proxy="http://127.0.0.1:3128/"</code> to have it point to your proxy. Save your changes and then restart docker. Restarting Docker is different on every OS.</p>

<blockquote>
  <p><strong>Note:</strong> If you are running Docker with systemd, please follow Docker’s <a href="https://docs.docker.com/articles/systemd/#http-proxy">instructions</a> on how to configure the HTTP proxy.</p>
</blockquote>

<p>In order for the <a href="/docs/rancher/v1.6/en/catalog/">Rancher catalog</a> to load, the proxy will need to be configured and Rancher server will need to be launched with environment variables to pass in the proxy information.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo docker run -d <span class="se">\</span>
    -e <span class="nv">http_proxy</span><span class="o">=</span>&lt;proxyURL&gt; <span class="se">\</span>
    -e <span class="nv">https_proxy</span><span class="o">=</span>&lt;proxyURL&gt; <span class="se">\</span>
    -e <span class="nv">no_proxy</span><span class="o">=</span><span class="s2">"localhost,127.0.0.1"</span> <span class="se">\</span>
    -e <span class="nv">NO_PROXY</span><span class="o">=</span><span class="s2">"localhost,127.0.0.1"</span> <span class="se">\</span>
    --restart<span class="o">=</span>unless-stopped -p 8080:8080 rancher/server
</code></pre>
</div>

<p>If the <a href="/docs/rancher/v1.6/en/catalog/">Rancher catalog</a> will not be used, run the Rancher server command as you normally would.</p>

<p>When <a href="/docs/rancher/v1.6/en/hosts/">adding hosts</a> to Rancher, there is no additional requirements behind an HTTP proxy.</p>

<p><a id="mysql-ssl"></a></p>

<h3 id="launching-rancher-server-with-mysql-over-ssl">Launching Rancher Server with MySQL over SSL</h3>
<blockquote>
  <p><strong>Note:</strong> Currently, supported in Rancher 1.6.3+</p>
</blockquote>

<h3 id="important-note">Important Note</h3>

<p>If you are using a LDAP/AD authentication backend with Rancher whose certificate is signed by a different CA then that of the MySQL server, then this guide will not work for you!</p>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
  <li>The certificate or CA cert of the MySQL server (PEM encoded)</li>
</ul>

<h3 id="instructions">Instructions</h3>

<ol>
  <li>Copy the server’s certificate or CA certificate to the Rancher server host. When starting the <code class="highlighter-rouge">rancher/server</code> container you will have to mount that certificate to <code class="highlighter-rouge">/var/lib/rancher/etc/ssl/ca.crt</code>.</li>
  <li>Construct a custom JDBC URL by replacing the placeholders in this string with your database parameters:<br />
<code class="highlighter-rouge">
jdbc:mysql://&lt;DB_HOST&gt;:&lt;DB_PORT&gt;/&lt;DB_NAME&gt;?useUnicode=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8&amp;prepStmtCacheSize=517&amp;cachePrepStmts=true&amp;prepStmtCacheSqlLimit=4096&amp;socketTimeout=60000&amp;connectTimeout=60000&amp;sslServerCert=/var/lib/rancher/etc/ssl/ca.crt&amp;useSSL=true
</code></li>
  <li>Export this JDBC URL to the container in both the <code class="highlighter-rouge">CATTLE_DB_CATTLE_MYSQL_URL</code> and <code class="highlighter-rouge">CATTLE_DB_LIQUIBASE_MYSQL_URL</code> environment variables</li>
  <li>Export <code class="highlighter-rouge">CATTLE_DB_CATTLE_GO_PARAMS="tls=true"</code> to the container. If the subject field of the server’s certificate does not match the server’s hostname, you will need to use <code class="highlighter-rouge">CATTLE_DB_CATTLE_GO_PARAMS="tls=skip-verify"</code> instead.</li>
</ol>

<h4 id="example">Example</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="gp">$ </span><span class="nb">export </span><span class="nv">JDBC_URL</span><span class="o">=</span><span class="s2">"jdbc:mysql://&lt;DB_HOST&gt;:&lt;DB_PORT&gt;/&lt;DB_NAME&gt;?useUnicode=true&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8&amp;prepStmtCacheSize=517&amp;cachePrepStmts=true&amp;prepStmtCacheSqlLimit=4096&amp;socketTimeout=60000&amp;connectTimeout=60000&amp;sslServerCert=/var/lib/rancher/etc/ssl/ca.crt&amp;useSSL=true"</span>

<span class="gp">$ </span>cat <span class="sh">&lt;&lt;EOF &gt; docker-compose.yml
version: '2'
  services:
    rancher-server:
      image: rancher/server:stable
      restart: unless-stopped
      command: --db-host &lt;DB_HOST&gt; --db-port &lt;DB_PORT&gt; --db-name &lt;DB_NAME&gt; --db-user &lt;DB_USER&gt; --db-pass &lt;DB_PASS&gt;
      environment:
        CATTLE_DB_LIQUIBASE_MYSQL_URL: $JDBC_URL
        CATTLE_DB_CATTLE_MYSQL_URL: $JDBC_URL
        CATTLE_DB_CATTLE_GO_PARAMS: "tls=true"
      volumes:
        - /path/to/mysql/ca.crt:/var/lib/rancher/etc/ssl/ca.crt
      ports:
        - "8080:8080"
EOF

</span><span class="gp">$ </span>docker-compose up -d
</code></pre>
</div>

<p><em>Important</em>: You have to specify your database parameters both in the JDBC URL as well as in the <code class="highlighter-rouge">--db-xxx</code> command arguments!</p>


          <footer class="clearfix">
            <div class="copyright pull-left">Copyright &copy; 2014-2017 <a href="http://rancher.com">Rancher Labs</a>.  All Rights Reserved.</div>
            <a class="btn btn-primary pull-right" href="https://github.com/rancher/rancher.github.io/tree/master/rancher/v1.6/en/installing-rancher/installing-server/index.md">Edit this page <i class="fa fa-pencil"></i></a>
          </footer>
        </div>
      </div>
    </div>

    <script src="/docs/vendor/jquery.js?t=2017-09-13 18:12:52 -0700"></script>
    <script src="/docs/js/jquery.slicknav.min.js?t=2017-09-13 18:12:52 -0700"></script>
    <script src="/docs/js/rancher-docs.js?t=2017-09-13 18:12:52 -0700"></script>

    <!-- Start of Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-56382716-3', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End of Google Analytics -->

    <!-- Start of Async HubSpot Analytics Code -->
    <script type="text/javascript">
    (function(d,s,i,r) {
    if (d.getElementById(i)){return;}
    var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
    n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/468859.js';
    e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
    </script>
    <!-- End of Async HubSpot Analytics Code -->
  </body>
</html>

